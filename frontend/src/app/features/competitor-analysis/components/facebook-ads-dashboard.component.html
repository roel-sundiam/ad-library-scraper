<div class="facebook-ads-dashboard">
  <!-- Loading State -->
  <div *ngIf="isLoading" class="loading-container">
    <mat-spinner diameter="50"></mat-spinner>
    <p>Loading Facebook Ads Analysis Results...</p>
  </div>

  <!-- Error State -->
  <div *ngIf="errorMessage" class="error-container">
    <mat-icon class="error-icon">error</mat-icon>
    <h3>Analysis Results Not Available</h3>
    <p>{{ errorMessage }}</p>
    <button mat-raised-button color="primary" routerLink="/competitor-analysis">
      Start New Analysis
    </button>
  </div>

  <!-- Results Dashboard -->
  <div *ngIf="!isLoading && !errorMessage && analysisResults" class="dashboard-content">
    
    <!-- Header Section -->
    <div class="dashboard-header">
      <div class="header-content">
        <h1>
          <mat-icon>analytics</mat-icon>
          Single Competitor Analysis
        </h1>
        <p>Analysis of {{ brandComparisons[0]?.brand || 'competitor' }} with {{ totalAds }} total ads found</p>
      </div>
      <div class="header-actions">
        <button mat-stroked-button (click)="exportData()">
          <mat-icon>download</mat-icon>
          Export Data
        </button>
        <button mat-raised-button color="primary" routerLink="/competitor-analysis">
          <mat-icon>add</mat-icon>
          New Analysis
        </button>
      </div>
    </div>

    <!-- Key Metrics Cards -->
    <div class="metrics-grid">
      <mat-card class="metric-card">
        <mat-card-content>
          <div class="metric-header">
            <mat-icon class="metric-icon ads">campaign</mat-icon>
            <span class="metric-label">Total Ads Found</span>
          </div>
          <div class="metric-value">{{ totalAds }}</div>
          <div class="metric-subtitle">Facebook Ad Library results</div>
        </mat-card-content>
      </mat-card>

      <mat-card class="metric-card">
        <mat-card-content>
          <div class="metric-header">
            <mat-icon class="metric-icon">business</mat-icon>
            <span class="metric-label">Competitor</span>
          </div>
          <div class="metric-value">{{ brandComparisons[0]?.brand || 'N/A' }}</div>
          <div class="metric-subtitle">Brand being analyzed</div>
        </mat-card-content>
      </mat-card>

      <mat-card class="metric-card">
        <mat-card-content>
          <div class="metric-header">
            <mat-icon class="metric-icon">play_circle</mat-icon>
            <span class="metric-label">Video Content</span>
          </div>
          <div class="metric-value">{{ formatPercentage(videoContentRate) }}</div>
          <div class="metric-subtitle">Ads with video content</div>
        </mat-card-content>
      </mat-card>

      <mat-card class="metric-card">
        <mat-card-content>
          <div class="metric-header">
            <mat-icon class="metric-icon">movie</mat-icon>
            <span class="metric-label">Video Ads</span>
          </div>
          <div class="metric-value">{{ totalVideoAds }}</div>
          <div class="metric-subtitle">Total video advertisements</div>
          <div style="margin-top: 12px;">
            <button mat-raised-button color="primary" (click)="showVideoAds()">
              <mat-icon>play_circle</mat-icon>
              View All Videos
            </button>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Brand Comparison Section -->
    <div class="section-container">
      <mat-card class="comparison-card">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>insights</mat-icon>
            Competitor Insights
          </mat-card-title>
          <mat-card-subtitle>Key metrics and advertising patterns for {{ brandComparisons[0]?.brand || 'this competitor' }}</mat-card-subtitle>
        </mat-card-header>
        
        <mat-card-content>
          <div *ngIf="brandComparisons.length > 0" class="competitor-overview">
            <div class="competitor-stats-grid">
              <div class="stat-item">
                <div class="stat-icon-container impressions">
                  <mat-icon>play_circle</mat-icon>
                </div>
                <div class="stat-details">
                  <div class="stat-value">{{ formatPercentage(brandComparisons[0].metrics.total_impressions) }}</div>
                  <div class="stat-label">Video Content Rate</div>
                </div>
              </div>

              <div class="stat-item">
                <div class="stat-icon-container spend">
                  <mat-icon>text_fields</mat-icon>
                </div>
                <div class="stat-details">
                  <div class="stat-value">{{ brandComparisons[0].metrics.total_spend.toFixed(0) }}</div>
                  <div class="stat-label">Avg Text Length (chars)</div>
                </div>
              </div>

              <div class="stat-item">
                <div class="stat-icon-container cpm">
                  <mat-icon>movie</mat-icon>
                </div>
                <div class="stat-details">
                  <div class="stat-value">{{ brandComparisons[0].metrics.average_cpm }}</div>
                  <div class="stat-label">Video Ads</div>
                </div>
              </div>

              <div class="stat-item">
                <div class="stat-icon-container ctr">
                  <mat-icon>image</mat-icon>
                </div>
                <div class="stat-details">
                  <div class="stat-value">{{ brandComparisons[0].metrics.average_ctr }}</div>
                  <div class="stat-label">Image Ads</div>
                </div>
              </div>
            </div>

            <div class="competitor-summary">
              <h4>{{ brandComparisons[0].brand }} Summary</h4>
              <p><strong>{{ brandComparisons[0].ad_frequency }}</strong> total ads found with <strong>{{ formatPercentage(videoContentRate) }}</strong> video content rate</p>
              <p>Creative mix: <strong>{{ brandComparisons[0].creative_types.image }}</strong> image ads, <strong>{{ brandComparisons[0].creative_types.video }}</strong> video ads</p>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Top Performing Ads Section -->
    <div class="section-container">
      <mat-card class="top-ads-card">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>schedule</mat-icon>
            Recent Ads
          </mat-card-title>
          <mat-card-subtitle>Most recently published ads across all brands</mat-card-subtitle>
        </mat-card-header>
        
        <mat-card-content>
          <div class="ads-grid">
            <div *ngFor="let ad of topPerformingAds; let i = index" 
                 class="ad-card" 
                 (click)="openAdDetails(ad)">
              
              <div class="ad-header">
                <div class="advertiser-info">
                  <span class="advertiser-name">{{ ad.advertiser.name }}</span>
                  <mat-icon *ngIf="ad.advertiser.verified" class="verified-badge" title="Verified">verified</mat-icon>
                </div>
                <div class="ad-rank">#{{ i + 1 }}</div>
              </div>

              <div class="ad-content">
                <div class="ad-text">{{ getAdPreviewText(ad) }}</div>
                <div *ngIf="ad.creative.images.length > 0" class="ad-media">
                  <mat-icon>image</mat-icon>
                  <span>{{ ad.creative.images.length }} image(s)</span>
                </div>
                <div *ngIf="ad.creative.has_video" class="ad-media">
                  <mat-icon>play_circle</mat-icon>
                  <span>Video content</span>
                </div>
              </div>

              <div class="ad-metrics">
                <div class="metric-item">
                  <span class="metric-label">Format</span>
                  <span class="metric-value">{{ ad.creative.has_video ? 'Video' : 'Image' }}</span>
                </div>
                <div class="metric-item">
                  <span class="metric-label">Text Length</span>
                  <span class="metric-value">{{ ad.creative.body?.length || 0 }} chars</span>
                </div>
                <div class="metric-item">
                  <span class="metric-label">Status</span>
                  <span class="metric-value">{{ ad.metadata.is_active ? 'Active' : 'Historical' }}</span>
                </div>
              </div>

              <div class="ad-footer">
                <div class="ad-source">
                  <mat-icon>source</mat-icon>
                  <span>{{ ad.metadata.source }}</span>
                </div>
                <div class="ad-date">
                  {{ ad.dates.start_date | date:'MMM d, y' }}
                </div>
              </div>
            </div>
          </div>

          <div *ngIf="topPerformingAds.length === 0" class="no-ads-message">
            <mat-icon>info</mat-icon>
            <p>No ad performance data available</p>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Detailed Brand Analysis -->
    <div class="section-container" *ngFor="let brand of brandComparisons; let i = index">
      <mat-card class="brand-detail-card">
        <mat-card-header>
          <mat-card-title>
            <div class="brand-header">
              <div class="brand-indicator" [style.background-color]="getBrandColor(i)"></div>
              {{ brand.brand }} Analysis
            </div>
          </mat-card-title>
          <mat-card-subtitle>{{ brand.ad_frequency }} ads found â€¢ {{ formatPercentage(brand.market_share) }} market share</mat-card-subtitle>
        </mat-card-header>
        
        <mat-card-content>
          <div class="brand-metrics-grid">
            <div class="brand-metric">
              <div class="metric-icon-container impressions">
                <mat-icon>play_circle</mat-icon>
              </div>
              <div class="metric-details">
                <div class="metric-value">{{ formatPercentage(brand.metrics.total_impressions) }}</div>
                <div class="metric-label">Video Content Rate</div>
              </div>
            </div>

            <div class="brand-metric">
              <div class="metric-icon-container spend">
                <mat-icon>text_fields</mat-icon>
              </div>
              <div class="metric-details">
                <div class="metric-value">{{ brand.metrics.total_spend.toFixed(0) }}</div>
                <div class="metric-label">Avg Text Length</div>
              </div>
            </div>

            <div class="brand-metric">
              <div class="metric-icon-container cpm">
                <mat-icon>movie</mat-icon>
              </div>
              <div class="metric-details">
                <div class="metric-value">{{ brand.metrics.average_cpm }}</div>
                <div class="metric-label">Video Ads</div>
              </div>
            </div>

            <div class="brand-metric">
              <div class="metric-icon-container ctr">
                <mat-icon>image</mat-icon>
              </div>
              <div class="metric-details">
                <div class="metric-value">{{ brand.metrics.average_ctr }}</div>
                <div class="metric-label">Image Ads</div>
              </div>
            </div>
          </div>

          <!-- Creative Types Distribution -->
          <div class="creative-types">
            <h4>Creative Types</h4>
            <div class="creative-distribution">
              <div class="creative-type">
                <mat-icon>image</mat-icon>
                <span>{{ brand.creative_types.image }} Images</span>
              </div>
              <div class="creative-type clickable-video-type" (click)="showBrandVideos(brand.brand)">
                <mat-icon>play_circle</mat-icon>
                <span>{{ brand.creative_types.video }} Videos</span>
                <mat-icon class="click-indicator" style="font-size: 16px; margin-left: 4px;">open_in_new</mat-icon>
              </div>
              <div class="creative-type">
                <mat-icon>view_carousel</mat-icon>
                <span>{{ brand.creative_types.carousel }} Carousels</span>
              </div>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- AI Analysis & Chat Section -->
    <div class="section-container">
      <mat-card class="ai-analysis-card">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>smart_toy</mat-icon>
            AI Analysis & Chat
          </mat-card-title>
          <mat-card-subtitle>Get AI-powered insights and ask questions about your competitor analysis</mat-card-subtitle>
        </mat-card-header>
        
        <mat-card-content>
          <!-- Analysis Mode Toggle -->
          <div class="analysis-mode-toggle">
            <mat-button-toggle-group [(value)]="analysisMode" (change)="switchAnalysisMode($event.value)">
              <mat-button-toggle value="general">
                <mat-icon>analytics</mat-icon>
                General Analysis
              </mat-button-toggle>
              <mat-button-toggle value="video">
                <mat-icon>movie</mat-icon>
                Bulk Video Analysis
              </mat-button-toggle>
            </mat-button-toggle-group>
          </div>

          <!-- General Analysis Section -->
          <div *ngIf="analysisMode === 'general'" class="custom-analysis-section">
            <h4>
              <mat-icon>psychology</mat-icon>
              Custom AI Analysis
            </h4>
            <p>Ask AI to analyze your competitor data with a custom prompt:</p>
            
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Enter your analysis prompt...</mat-label>
              <textarea 
                matInput 
                [(ngModel)]="customPrompt" 
                rows="3"
                placeholder="e.g., 'Analyze video content strategies across competitors' or 'What messaging themes are most common?'"
              ></textarea>
            </mat-form-field>
            
            <div class="analysis-actions">
              <button 
                mat-raised-button 
                color="primary" 
                (click)="runCustomAnalysis()"
                [disabled]="!customPrompt.trim() || isAnalyzing"
              >
                <mat-icon *ngIf="!isAnalyzing">psychology</mat-icon>
                <mat-spinner *ngIf="isAnalyzing" diameter="20"></mat-spinner>
                {{ isAnalyzing ? 'Analyzing...' : 'Run AI Analysis' }}
              </button>
              
              <button mat-stroked-button (click)="showQuickPrompts = !showQuickPrompts">
                <mat-icon>help_outline</mat-icon>
                Quick Prompts
              </button>
            </div>

            <!-- Quick Prompt Suggestions -->
            <div *ngIf="showQuickPrompts" class="quick-prompts">
              <h5>Quick Prompt Ideas:</h5>
              <div class="prompt-chips">
                <button 
                  *ngFor="let prompt of quickPrompts" 
                  mat-stroked-button 
                  (click)="useQuickPrompt(prompt)"
                  class="prompt-chip"
                >
                  {{ prompt }}
                </button>
              </div>
            </div>

            <!-- Analysis Results -->
            <div *ngIf="customAnalysisResult" class="analysis-results">
              <mat-divider></mat-divider>
              <h5>
                <mat-icon>insights</mat-icon>
                Analysis Results
                <span class="ai-provider">({{ customAnalysisResult.metadata?.ai_provider || 'AI' }})</span>
              </h5>
              <div class="analysis-content" [innerHTML]="formatAnalysisResult(customAnalysisResult.analysis)"></div>
            </div>
          </div>

          <!-- Bulk Video Analysis Section -->
          <div *ngIf="analysisMode === 'video'" class="bulk-video-analysis-section">
            <h4>
              <mat-icon>movie</mat-icon>
              Bulk Video Analysis
            </h4>
            <p>Analyze ALL competitor videos ({{ totalVideoAds }} videos) with AI-powered insights including transcripts and strategic intelligence:</p>
            
            <!-- Video Analysis Options -->
            <div class="video-analysis-options">
              <div class="options-row">
                <mat-checkbox [(ngModel)]="includeTranscripts">
                  <mat-icon>subtitles</mat-icon>
                  Include Video Transcripts (OpenAI Whisper)
                </mat-checkbox>
                <mat-checkbox [(ngModel)]="includeVisualAnalysis" [disabled]="true">
                  <mat-icon>visibility</mat-icon>
                  Include Visual Analysis (Coming Soon)
                </mat-checkbox>
              </div>
            </div>

            <!-- Video Analysis Templates -->
            <div class="video-templates-section">
              <div class="template-selector-header">
                <button mat-stroked-button (click)="showVideoTemplates = !showVideoTemplates">
                  <mat-icon>template_outline</mat-icon>
                  Choose Analysis Template
                  <mat-icon>{{ showVideoTemplates ? 'expand_less' : 'expand_more' }}</mat-icon>
                </button>
                <span class="template-count">{{ videoAnalysisTemplates.length }} professional templates</span>
              </div>

              <div *ngIf="showVideoTemplates" class="video-templates-grid">
                <div *ngFor="let template of videoAnalysisTemplates" 
                     class="template-card"
                     [class.selected]="selectedVideoTemplate === template.id"
                     (click)="useVideoTemplate(template.id)">
                  <div class="template-header">
                    <h5>{{ template.name }}</h5>
                    <mat-icon *ngIf="selectedVideoTemplate === template.id" class="selected-icon">check_circle</mat-icon>
                  </div>
                  <p class="template-description">{{ template.description }}</p>
                </div>
              </div>
            </div>
            
            <!-- Custom Prompt -->
            <mat-form-field appearance="outline" class="full-width">
              <mat-label>Video analysis prompt (customize or use template)...</mat-label>
              <textarea 
                matInput 
                [(ngModel)]="customPrompt" 
                rows="6"
                placeholder="Describe what insights you want from the competitor's video content..."
              ></textarea>
              <mat-hint>Tip: Use templates above or create your own analysis prompt for {{ totalVideoAds }} videos</mat-hint>
            </mat-form-field>
            
            <!-- Analysis Actions -->
            <div class="video-analysis-actions">
              <button 
                mat-raised-button 
                color="primary" 
                (click)="startBulkVideoAnalysis()"
                [disabled]="!customPrompt.trim() || isBulkAnalyzing || totalVideoAds === 0"
                class="analyze-button">
                <mat-icon *ngIf="!isBulkAnalyzing">smart_toy</mat-icon>
                <mat-spinner *ngIf="isBulkAnalyzing" diameter="20"></mat-spinner>
                {{ isBulkAnalyzing ? 'Analyzing Videos...' : 'Analyze ' + totalVideoAds + ' Videos' }}
              </button>
              
              <button 
                *ngIf="isBulkAnalyzing"
                mat-stroked-button 
                color="warn"
                (click)="cancelBulkAnalysis()">
                <mat-icon>cancel</mat-icon>
                Cancel Analysis
              </button>
            </div>

            <!-- Progress Tracking -->
            <div *ngIf="bulkAnalysisProgress" class="analysis-progress">
              <div class="progress-header">
                <h5>
                  <mat-icon>hourglass_empty</mat-icon>
                  {{ bulkAnalysisProgress.message }}
                </h5>
                <span class="progress-stats">{{ bulkAnalysisProgress.current || 0 }}/{{ bulkAnalysisProgress.total || 0 }}</span>
              </div>
              
              <mat-progress-bar 
                mode="determinate" 
                [value]="bulkAnalysisProgress.percentage || 0">
              </mat-progress-bar>
              
              <div class="progress-stages">
                <div class="stage" [class.active]="bulkAnalysisProgress.stage === 'initializing'">
                  <mat-icon>start</mat-icon>
                  <span>Initializing</span>
                </div>
                <div class="stage" [class.active]="bulkAnalysisProgress.stage === 'transcribing'">
                  <mat-icon>subtitles</mat-icon>
                  <span>Transcribing</span>
                </div>
                <div class="stage" [class.active]="bulkAnalysisProgress.stage === 'analyzing'">
                  <mat-icon>psychology</mat-icon>
                  <span>AI Analysis</span>
                </div>
                <div class="stage" [class.active]="bulkAnalysisProgress.stage === 'completed'">
                  <mat-icon>check_circle</mat-icon>
                  <span>Complete</span>
                </div>
              </div>
            </div>

            <!-- Bulk Analysis Results -->
            <div *ngIf="bulkAnalysisResult" class="bulk-analysis-results">
              <mat-divider></mat-divider>
              <div class="results-header">
                <h5>
                  <mat-icon>assessment</mat-icon>
                  Bulk Video Analysis Report
                  <span class="video-count">({{ bulkAnalysisProgress?.total || 0 }} videos analyzed)</span>
                </h5>
                <button mat-stroked-button (click)="downloadBulkAnalysisReport()">
                  <mat-icon>download</mat-icon>
                  Download Report
                </button>
              </div>
              
              <div class="bulk-analysis-content">
                <div class="analysis-summary" *ngIf="bulkAnalysisResult.summary">
                  <h6>Executive Summary</h6>
                  <div [innerHTML]="formatAnalysisResult(bulkAnalysisResult.summary)"></div>
                </div>
                
                <div class="detailed-analysis" *ngIf="bulkAnalysisResult.analysis">
                  <h6>Detailed Analysis</h6>
                  <div [innerHTML]="formatAnalysisResult(bulkAnalysisResult.analysis)"></div>
                </div>
                
                <div class="recommendations" *ngIf="bulkAnalysisResult.recommendations">
                  <h6>Strategic Recommendations</h6>
                  <div [innerHTML]="formatAnalysisResult(bulkAnalysisResult.recommendations)"></div>
                </div>
              </div>
            </div>
          </div>

          <mat-divider class="section-divider"></mat-divider>

          <!-- AI Chat Interface -->
          <div class="ai-chat-section">
            <h4>
              <mat-icon>chat</mat-icon>
              Chat with AI About Your Analysis
            </h4>
            <p>Ask follow-up questions about your competitor analysis results:</p>
            
            <!-- Integrate the AI Chat Component -->
            <app-ai-chat [analysisResults]="getAnalysisResultsForChat()"></app-ai-chat>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

    <!-- Analysis Meta Information -->
    <div class="section-container">
      <mat-card class="meta-info-card">
        <mat-card-header>
          <mat-card-title>
            <mat-icon>info</mat-icon>
            Analysis Information
          </mat-card-title>
        </mat-card-header>
        
        <mat-card-content>
          <div class="meta-grid">
            <div class="meta-item">
              <span class="meta-label">Analysis ID:</span>
              <span class="meta-value">{{ datasetId }}</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">Total Brands:</span>
              <span class="meta-value">{{ brandComparisons.length }}</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">Total Ads Found:</span>
              <span class="meta-value">{{ totalAds }}</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">Data Sources:</span>
              <span class="meta-value">{{ analysisResults.meta?.data_sources?.join(', ') || 'Multiple' }}</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">Analysis Duration:</span>
              <span class="meta-value">{{ analysisResults.meta?.analysis_duration || 'N/A' }}</span>
            </div>
          </div>
        </mat-card-content>
      </mat-card>
    </div>

  </div>
</div>

<!-- Modern Video Modal -->
<div class="video-modal-overlay" *ngIf="showVideoModal" (click)="closeVideoModal()">
  <div class="video-modal" (click)="$event.stopPropagation()">
    <!-- Modal Header -->
    <div class="modal-header">
      <h2>
        <mat-icon>movie</mat-icon>
        {{ modalTitle }}
      </h2>
      <button mat-icon-button (click)="closeVideoModal()" class="close-button">
        <mat-icon>close</mat-icon>
      </button>
    </div>

    <!-- Video Summary Stats -->
    <div class="video-stats" *ngIf="!isFiltered">
      <div class="stat-card">
        <mat-icon>movie</mat-icon>
        <div class="stat-info">
          <span class="stat-number">{{ totalModalVideos }}</span>
          <span class="stat-label">Total Videos</span>
        </div>
      </div>
      
      <div class="stat-card" *ngFor="let brand of videoBreakdown">
        <mat-icon [style.color]="getBrandColor(brand.index)">business</mat-icon>
        <div class="stat-info">
          <span class="stat-number">{{ brand.count }}</span>
          <span class="stat-label">{{ brand.name }}</span>
        </div>
      </div>
    </div>

    <!-- Modal Content -->
    <div class="modal-content">
      <div class="video-list">
        <div *ngFor="let video of displayedVideos; let i = index" class="video-item">
          <div class="video-info">
            <div class="video-header">
              <span class="video-number">{{ i + 1 }}</span>
              <div class="brand-tag" [style.background-color]="getBrandColorForName(video.brand)">
                {{ video.brand }}
              </div>
              <span class="video-date">{{ formatDate(video.dates?.start_date) }}</span>
            </div>
            
            <div class="video-content">
              <p class="video-text">{{ getVideoText(video) }}</p>
              
              <!-- Video URL Display -->
              <div class="video-url" *ngIf="getVideoUrl(video)">
                <mat-icon>link</mat-icon>
                <span class="url-label">Video URL:</span>
                <a [href]="getVideoUrl(video)" target="_blank" class="video-link">
                  {{ getVideoUrl(video) }}
                </a>
              </div>
              
              <div class="video-actions">
                <a *ngIf="getVideoUrl(video)" 
                   [href]="getVideoUrl(video)" 
                   target="_blank" 
                   mat-raised-button 
                   color="primary" 
                   class="action-button">
                  <mat-icon>play_circle</mat-icon>
                  Watch Video
                </a>
                
                <a [href]="getFacebookUrl(video.id)" 
                   target="_blank" 
                   mat-stroked-button 
                   class="action-button">
                  <mat-icon>open_in_new</mat-icon>
                  View on Facebook
                </a>
                
                <button mat-raised-button 
                        color="accent" 
                        (click)="analyzeVideoWithAI(video)"
                        class="action-button">
                  <mat-icon>psychology</mat-icon>
                  Analyze with AI
                </button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <!-- Load More Button -->
      <div class="load-more-section" *ngIf="hasMoreVideos">
        <button mat-raised-button color="accent" (click)="loadMoreVideos()">
          <mat-icon>expand_more</mat-icon>
          Load More Videos ({{ remainingVideos }} remaining)
        </button>
      </div>
    </div>

    <!-- Modal Footer -->
    <div class="modal-footer">
      <div class="modal-tips">
        <mat-icon>tips_and_updates</mat-icon>
        <span>Use AI Chat to analyze video patterns across all your competitor videos</span>
      </div>
      
      <div class="modal-actions">
        <button mat-stroked-button (click)="exportVideoData()">
          <mat-icon>download</mat-icon>
          Export Video List
        </button>
        <button mat-raised-button color="primary" (click)="closeVideoModal()">
          Close
        </button>
      </div>
    </div>
  </div>
</div>